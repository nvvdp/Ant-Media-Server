(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{UO6m:function(e,t,i){"use strict";i.d(t,"a",(function(){return Ne}));var s=i("lTdr"),n=i("XGgE"),c=i("OLhb"),a=i("U/Bw"),r=i("eikZ"),o=i("+0xr"),l=i("0IaG"),b=i("fXoL"),d=i("3Pt+"),p=i("ofXK");let u=(()=>{class e{constructor(e,t){this.validateEqual=e,this.reverse=t}get isReverse(){return!!this.reverse&&"true"===this.reverse}validate(e){let t=e.value,i=e.root.get(this.validateEqual);return i&&t!==i.value&&!this.isReverse?{validateEqual:!1}:(i&&t===i.value&&this.isReverse&&(delete i.errors.validateEqual,Object.keys(i.errors).length||i.setErrors(null)),i&&t!==i.value&&this.isReverse&&i.setErrors({validateEqual:!1}),null)}}return e.\u0275fac=function(t){return new(t||e)(b.dc("validateEqual"),b.dc("reverse"))},e.\u0275dir=b.Ib({type:e,selectors:[["","validateEqual","","formControlName",""],["","validateEqual","","formControl",""],["","validateEqual","","ngModel",""]],features:[b.Ab([{provide:d.h,useExisting:Object(b.V)(()=>e),multi:!0}])]}),e})();var g,f,h;g=$localize`:@@editUserCardTitle␟5371b1c5378106a120214f43b1646d08f9b16d58␟4111930681756918380: Edit User `,f=$localize`:@@newLiveStreamCancelButton␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,h=$localize`:@@newPassword␟c7014c6360e94b236286b869c3fe0ea9911c0387␟1221596867309460035:New Password`;const S=["placeholder",$localize`:@@password_place_holder␟c32ef07f8803a223a83ed17024b38e8d82292407␟1431416938026210429:Password`];function m(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",14),b.Tb(1,"label"),b.Xb(2,h),b.Sb(),b.Tb(3,"input",15,16),b.Yb(5,S),b.gc("ngModelChange",(function(t){return b.Ac(e),b.kc().userEditing.newPassword=t})),b.Sb(),b.Tb(6,"small",17),b.Lc(7," Password is required and at least 6 characters "),b.Sb(),b.Sb()}if(2&e){const e=b.yc(4),t=b.kc(),i=b.yc(2);b.Bb(3),b.rc("required",t.userEditing.newPassword)("ngModel",t.userEditing.newPassword),b.Bb(3),b.rc("hidden",e.valid||!i.submitted)}}var T,v;function y(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",14),b.Tb(1,"label"),b.Xb(2,T),b.Sb(),b.Tb(3,"input",18,19),b.gc("ngModelChange",(function(t){return b.Ac(e),b.kc().newPasswordAgain=t})),b.Sb(),b.Tb(5,"small",17),b.Lc(6," Passwords should match "),b.Sb(),b.Sb()}if(2&e){const e=b.yc(4),t=b.kc(),i=b.yc(2);b.Bb(3),b.rc("required",t.changePassword)("ngModel",t.newPasswordAgain),b.Bb(2),b.rc("hidden",e.valid||!i.submitted)}}function E(e,t){if(1&e&&(b.Tb(0,"option",21),b.Lc(1),b.Sb()),2&e){const e=t.$implicit;b.rc("value",e),b.Bb(1),b.Nc(" ",e," ")}}function C(e,t){if(1&e){const e=b.Ub();b.Tb(0,"select",20),b.gc("ngModelChange",(function(t){return b.Ac(e),b.kc(2).userEditing.scope=t})),b.Tb(1,"option",21),b.Lc(2,"Everything"),b.Sb(),b.Jc(3,E,2,2,"option",23),b.Sb()}if(2&e){const e=b.kc(2);b.rc("name","ApplicationPermission")("ngModel",e.userEditing.scope),b.Bb(1),b.sc("value",e.SYSTEM_SCOPE_OF_ACCESS),b.Bb(2),b.rc("ngForOf",e.applications.applications)}}function A(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div"),b.Tb(1,"fieldset"),b.Tb(2,"div",14),b.Tb(3,"label"),b.Lc(4,"User type"),b.Sb(),b.Tb(5,"select",20),b.gc("ngModelChange",(function(t){return b.Ac(e),b.kc().userEditing.userType=t})),b.Tb(6,"option",21),b.Lc(7),b.Sb(),b.Tb(8,"option",21),b.Lc(9),b.Sb(),b.Tb(10,"option",21),b.Lc(11),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(12,"div",14),b.Tb(13,"label"),b.Lc(14,"Scope of Access"),b.Sb(),b.Jc(15,C,4,4,"select",22),b.Sb(),b.Sb()}if(2&e){const e=b.kc();b.Bb(5),b.rc("name","UserType")("ngModel",e.userEditing.userType),b.Bb(1),b.sc("value",e.AdminUserType),b.Bb(1),b.Mc(e.AdminUserType),b.Bb(1),b.sc("value",e.BasicUserType),b.Bb(1),b.Mc(e.BasicUserType),b.Bb(1),b.sc("value",e.ReadOnlyUserType),b.Bb(1),b.Mc(e.ReadOnlyUserType),b.Bb(4),b.rc("ngIf",e.applications)}}function L(e,t){if(1&e&&(b.Tb(0,"option",21),b.Lc(1),b.Sb()),2&e){const e=t.$implicit;b.rc("value",e),b.Bb(1),b.Nc(" ",e," ")}}function w(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",33),b.gc("click",(function(){b.Ac(e);const t=b.kc().index;return b.kc(2).deleteScope(t)})),b.Ob(1,"i",34),b.Sb()}}function U(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",28),b.Tb(1,"div",14),b.Tb(2,"label"),b.Lc(3,"Scope of Access "),b.Sb(),b.Tb(4,"select",29),b.gc("ngModelChange",(function(i){return b.Ac(e),t.$implicit.key=i}))("change",(function(i){b.Ac(e);const s=t.index,n=t.$implicit;return b.kc(2).onScopeChange(i,s,n.key)})),b.Tb(5,"option",21),b.Lc(6,"Everything"),b.Sb(),b.Jc(7,L,2,2,"option",23),b.Sb(),b.Sb(),b.Tb(8,"div",30),b.Tb(9,"label"),b.Lc(10,"User type "),b.Sb(),b.Tb(11,"select",31),b.gc("change",(function(i){b.Ac(e);const s=t.$implicit;return b.kc(2).onUserTypeChange(i,s.key)}))("ngModelChange",(function(i){return b.Ac(e),t.$implicit.value=i})),b.Tb(12,"option",21),b.Lc(13),b.Sb(),b.Tb(14,"option",21),b.Lc(15),b.Sb(),b.Tb(16,"option",21),b.Lc(17),b.Sb(),b.Sb(),b.Sb(),b.Jc(18,w,2,0,"button",32),b.Sb()}if(2&e){const e=t.$implicit,i=t.index,s=b.kc(2);b.Bb(4),b.rc("name","ApplicationPermission_"+i)("ngModel",e.key),b.Bb(1),b.rc("value",s.SYSTEM_SCOPE_OF_ACCESS),b.Bb(2),b.rc("ngForOf",s.applications.applications),b.Bb(4),b.rc("name","UserType_"+i)("ngModel",e.value),b.Bb(1),b.sc("value",s.AdminUserType),b.Bb(1),b.Mc(s.AdminUserType),b.Bb(1),b.sc("value",s.BasicUserType),b.Bb(1),b.Mc(s.BasicUserType),b.Bb(1),b.sc("value",s.ReadOnlyUserType),b.Bb(1),b.Mc(s.ReadOnlyUserType),b.Bb(1),b.rc("ngIf",s.hasMoreThanOneAppScope())}}function M(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",35),b.gc("click",(function(){return b.Ac(e),b.kc(2).addMoreApplicationAccess()})),b.Lc(1,"Add More"),b.Sb()}}function B(e,t){if(1&e&&(b.Tb(0,"div"),b.Tb(1,"label",24),b.Lc(2,"Application Access"),b.Sb(),b.Tb(3,"div",25),b.Jc(4,U,19,13,"div",26),b.lc(5,"keyvalue"),b.Jc(6,M,2,0,"button",27),b.Sb(),b.Sb()),2&e){const e=b.kc();b.Bb(4),b.rc("ngForOf",b.mc(5,2,e.userEditing.appNameUserType)),b.Bb(2),b.rc("ngIf",e.addMoreApplicationAccessButtonVisible)}}function I(e,t){1&e&&(b.bc(0,v,1),b.Ob(1,"i",36),b.Zb())}T=$localize`:@@newPassword␟a80ca2c8cdd5c57ec276e5917673c562a988ac04␟8663553932392094435:New Password(Again)`,v=$localize`:@@newLiveStreamSaveButton␟49019640af78cddd3b21bc3584f1499e5d8ed91b␟5740235461931807510:${"\ufffd*18:1\ufffd\ufffd#1:1\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#1:1\ufffd\ufffd/*18:1\ufffd"}:CLOSE_ITALIC_TEXT:Save`;let O=(()=>{class e{constructor(e,t,i){this.dialogRef=e,this.restService=t,this.data=i,this.loading=!1,this.userUpdating=!1,this.userNameEmpty=!1,this.changePassword=!1,this.newPasswordAgain="",this.AdminUserType="ADMIN",this.ReadOnlyUserType="READ_ONLY",this.BasicUserType="USER",this.SYSTEM_SCOPE_OF_ACCESS="system",this.addMoreApplicationAccessButtonVisible=!1;var s=i.user;console.log(s),console.debug(s.email+" - "+s.userType),this.userEditing=new a.f(s.email,""),this.userEditing.scope=s.scope,this.userEditing.userType=s.userType,this.userEditing.appNameUserType=s.appNameUserType}ngOnInit(){this.restService.getApplications().subscribe(e=>{this.applications=e,console.log(this.applications.applications),this.isShowAddMoreApplicationAccessButton()},e=>{Object(a.g)(e)})}isShowAddMoreApplicationAccessButton(){const e=Object.keys(this.userEditing.appNameUserType);var t=!1;for(const i of e)if(i===this.SYSTEM_SCOPE_OF_ACCESS){t=!0;break}this.addMoreApplicationAccessButtonVisible=!t&&this.applications.applications.length>Object.keys(this.userEditing.appNameUserType).length}addMoreApplicationAccess(){const e=Object.keys(this.userEditing.appNameUserType);for(const t of this.applications.applications)if(!e.includes(t)){this.userEditing.appNameUserType[t]=this.AdminUserType,console.log("Adding",t);break}this.isShowAddMoreApplicationAccessButton()}onNoClick(){this.dialogRef.close()}updateUser(e){e&&(this.restService.checkStreamName(this.userEditing.email)?(console.log("user pass word "+this.userEditing.newPassword),""!=this.userEditing.newPassword&&null!=this.userEditing.newPassword&&(this.userEditing.newPassword=Object(c.d)(this.userEditing.newPassword)),this.userUpdating=!0,this.restService.editUser(this.userEditing).subscribe(e=>{console.log("data :"+JSON.stringify(e)),this.userUpdating=!1,e.success?($.notify({icon:"ti-save",message:"User is updated"},{type:"success",delay:900,placement:{from:"top",align:"right"}}),this.dialogRef.close()):$.notify({icon:"ti-alert",message:"User is not updated: "+e.message+" "+e.errorId},{type:"warning",delay:900,placement:{from:"top",align:"right"}})},e=>{Object(a.g)(e),this.userUpdating=!1})):this.userNameEmpty=!0)}cancelEditLiveStream(){this.dialogRef.close()}deleteScope(e){1!=Object.keys(this.userEditing.appNameUserType).length?(Object.keys(this.userEditing.appNameUserType).forEach((t,i)=>{e===i&&delete this.userEditing.appNameUserType[t]}),this.isShowAddMoreApplicationAccessButton()):alert("At least 1 app scope is required.")}hasMoreThanOneAppScope(){return Object.keys(this.userEditing.appNameUserType).length>1}onUserTypeChange(e,t){this.userEditing.appNameUserType[t]=e.target.value}onScopeChange(e,t){const i=e.target.value;i===this.SYSTEM_SCOPE_OF_ACCESS?Object.keys(this.userEditing.appNameUserType).forEach((e,i)=>{if(i!==t)delete this.userEditing.appNameUserType[e];else{const t=this.userEditing.appNameUserType[e];delete this.userEditing.appNameUserType[e],this.userEditing.appNameUserType[this.SYSTEM_SCOPE_OF_ACCESS]=t}}):Object.keys(this.userEditing.appNameUserType).forEach((e,s)=>{if(s===t){const t=this.userEditing.appNameUserType[e];delete this.userEditing.appNameUserType[e],this.userEditing.appNameUserType[i]=t}}),console.log(this.userEditing.appNameUserType),this.isShowAddMoreApplicationAccessButton()}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(l.g),b.Nb(a.e),b.Nb(l.a))},e.\u0275cmp=b.Hb({type:e,selectors:[["user-edit-dialog"]],decls:21,vars:7,consts:[["method","post","validate","",3,"ngSubmit"],["f","ngForm"],[1,"card-content",2,"padding-top","0px"],[1,"card-title","text-left"],[1,"card-content"],[1,"checkbox"],["enabled","","id","change_password","name","change_password","type","checkbox",3,"ngModel","ngModelChange"],["for","change_password"],["class","form-group text-left",4,"ngIf"],[4,"ngIf"],[1,"form-group","text-center"],["type","submit",1,"btn","btn-fill","btn-success",3,"disabled"],["class","fa fa-spinner fa-pulse fa-1x fa-fw","aria-hidden","true",4,"ngIf"],["type","button",1,"btn","btn-simple",3,"click"],[1,"form-group","text-left"],["type","password","name","password","minlength","6","validateEqual","password_again","reverse","true",1,"form-control",3,"required","ngModel","ngModelChange",6,"placeholder"],["password","ngModel"],[1,"text-danger",3,"hidden"],["type","password","name","password_again","minlength","6","placeholder","Password","reverse","false","validateEqual","password",1,"form-control",3,"required","ngModel","ngModelChange"],["password_again","ngModel"],["type","text","required","",1,"dropdown-toggle","form-control",3,"name","ngModel","ngModelChange"],[3,"value"],["type","text","class","dropdown-toggle form-control","required","",3,"name","ngModel","ngModelChange",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[2,"font-size","22px"],[2,"max-height","250px","overflow-y","scroll"],["style","display: flex;  width: 350px; align-items: center;",4,"ngFor","ngForOf"],["type","button","id","addMoreApplicationAccessButton",3,"click",4,"ngIf"],[2,"display","flex","width","350px","align-items","center"],["type","text",1,"dropdown-toggle","form-control",3,"name","ngModel","ngModelChange","change"],[1,"form-group","text-left",2,"margin-left","20px"],["type","text",1,"dropdown-toggle","form-control",3,"name","ngModel","change","ngModelChange"],["style","margin-left: 20px;","class","btn btn-icon btn-simple btn-danger btn-minus","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-icon","btn-simple","btn-danger","btn-minus",2,"margin-left","20px",3,"click"],[1,"ti-close"],["type","button","id","addMoreApplicationAccessButton",3,"click"],["aria-hidden","true",1,"fa","fa-spinner","fa-pulse","fa-1x","fa-fw"]],template:function(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div"),b.Tb(1,"form",0,1),b.gc("ngSubmit",(function(){b.Ac(e);const i=b.yc(2);return t.updateUser(i.valid)})),b.Tb(3,"div",2),b.Tb(4,"h4",3),b.Xb(5,g),b.Sb(),b.Sb(),b.Tb(6,"div",4),b.Tb(7,"div",5),b.Tb(8,"input",6),b.gc("ngModelChange",(function(e){return t.changePassword=e})),b.Sb(),b.Tb(9,"label",7),b.Lc(10," Change Password "),b.Sb(),b.Sb(),b.Jc(11,m,8,3,"div",8),b.Jc(12,y,7,3,"div",8),b.Jc(13,A,16,9,"div",9),b.Jc(14,B,7,4,"div",9),b.Tb(15,"div",10),b.Tb(16,"button",11),b.bc(17,v),b.Jc(18,I,2,0,"i",12),b.Zb(),b.Sb(),b.Tb(19,"button",13),b.gc("click",(function(){return t.cancelEditLiveStream()})),b.Xb(20,f),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}2&e&&(b.Bb(8),b.rc("ngModel",t.changePassword),b.Bb(3),b.rc("ngIf",t.changePassword),b.Bb(1),b.rc("ngIf",t.changePassword),b.Bb(1),b.rc("ngIf",!t.userEditing.appNameUserType),b.Bb(1),b.rc("ngIf",t.userEditing.appNameUserType),b.Bb(2),b.rc("disabled",t.userUpdating),b.Bb(2),b.rc("ngIf",t.userUpdating))},directives:[d.x,d.l,d.m,d.a,d.k,d.n,p.p,d.d,d.g,u,d.t,d.u,d.o,d.w,p.o],pipes:[p.j],encapsulation:2}),e})();i("4XzM"),i("S7rW");var k=i("tk/3"),N=i("tyNb"),x=i("Qu3c");const _=["sslConfigurationSelect"],F=["class","settings"];var R,D,P,J,q,z,j,Y;function K(e,t){1&e&&(b.Tb(0,"div",24),b.Tb(1,"p",37),b.Ob(2,"i",38),b.Lc(3," Please wait.."),b.Sb(),b.Sb())}function X(e,t){if(1&e&&(b.Tb(0,"div",24),b.Tb(1,"p",37),b.Ob(2,"i",39),b.Lc(3),b.Sb(),b.Tb(4,"small",40),b.Lc(5),b.Sb(),b.Sb()),2&e){const e=b.kc(3);b.Bb(3),b.Nc(" ",e.licenseStatus," "),b.Bb(2),b.Mc(e.licenseStatusExplaination)}}function V(e,t){if(1&e&&(b.Tb(0,"div",24),b.Tb(1,"p",37),b.Ob(2,"i",38),b.Lc(3),b.Sb(),b.Sb()),2&e){const e=b.kc(3);b.Bb(3),b.Nc(" ",e.licenseStatus,"..")}}function W(e,t){if(1&e&&(b.Tb(0,"div",24),b.Tb(1,"p",37),b.Ob(2,"i",41),b.Lc(3),b.Sb(),b.Sb()),2&e){const e=b.kc(3);b.Bb(3),b.Pc(" Owner : ",e.currentLicence.owner," | Until : ",e.currentLicence.endDate," ",e._messageReceived,"")}}function H(e,t){if(1&e&&(b.Tb(0,"div",35),b.Tb(1,"label",23),b.Lc(2,"License Status"),b.Sb(),b.Jc(3,K,4,0,"div",36),b.Jc(4,X,6,2,"div",36),b.Jc(5,V,4,1,"div",36),b.Jc(6,W,4,3,"div",36),b.Sb()),2&e){const e=b.kc(2);b.Bb(3),b.rc("ngIf",e.licenseStatusReceiving),b.Bb(1),b.rc("ngIf",!e.licenseStatusReceiving&&("Invalid"===e.licenseStatus||"Suspended"===e.licenseStatus||"Expired"===e.licenseStatus||"Trial expired"===e.licenseStatus)),b.Bb(1),b.rc("ngIf",!e.licenseStatusReceiving&&"Getting license status"===e.licenseStatus),b.Bb(1),b.rc("ngIf",!e.licenseStatusReceiving&&"Valid"===e.licenseStatus)}}function Q(e,t){if(1&e){const e=b.Ub();b.Tb(0,"fieldset"),b.Tb(1,"div",22),b.Tb(2,"label",23),b.Lc(3,"License Key"),b.Sb(),b.Tb(4,"div",42),b.Tb(5,"input",43,44),b.gc("ngModelChange",(function(t){return b.Ac(e),b.kc(2).serverSettings.licenceKey=t})),b.Sb(),b.Tb(7,"small",45),b.Xb(8,J),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=b.yc(6);b.kc();const t=b.yc(3),i=b.kc();b.Bb(5),b.rc("ngModel",i.serverSettings.licenceKey),b.Bb(2),b.rc("hidden",e.valid||!t.submitted)}}function G(e,t){if(1&e&&(b.Tb(0,"fieldset"),b.Tb(1,"div",22),b.Tb(2,"label",23),b.Lc(3,"Hour Used "),b.Tb(4,"a",46),b.Ob(5,"i",47),b.Sb(),b.Sb(),b.Tb(6,"div",42),b.Tb(7,"p",37),b.Ob(8,"i",48),b.Lc(9),b.Sb(),b.Sb(),b.Sb(),b.Sb()),2&e){const e=b.kc(2);b.Bb(4),b.tc("href","https://license.antmedia.io/?licenseId=",e.serverSettings.licenceKey,"",b.Bc),b.Bb(5),b.Nc(" ",e.currentLicence.hourUsed," ")}}function Z(e,t){1&e&&(b.Tb(0,"p"),b.Lc(1," The Ant Media Server Enterprise Marketplace Edition is all set - no license activation required. Enjoy! "),b.Sb())}function ee(e,t){1&e&&(b.Tb(0,"p"),b.Lc(1," This is the Ant Media Server Community Edition - no license activation required. Enjoy! "),b.Sb())}function te(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",27),b.Tb(1,"div"),b.Tb(2,"form",28,29),b.gc("ngSubmit",(function(){b.Ac(e);const t=b.yc(3);return b.kc().changeServerSettings(t.valid)})),b.Tb(4,"fieldset"),b.Jc(5,H,7,4,"div",30),b.Sb(),b.Jc(6,Q,9,2,"fieldset",26),b.Tb(7,"fieldset"),b.Tb(8,"div",22),b.Tb(9,"label",23),b.Lc(10,"Log Status"),b.Sb(),b.Tb(11,"div",24),b.Tb(12,"select",31),b.gc("ngModelChange",(function(t){return b.Ac(e),b.kc().logLevelChanged(t)}))("ngModelChange",(function(t){return b.Ac(e),b.kc().serverSettings.logLevel=t})),b.Tb(13,"option",32),b.Lc(14),b.Sb(),b.Tb(15,"option",32),b.Lc(16),b.Sb(),b.Tb(17,"option",32),b.Lc(18),b.Sb(),b.Tb(19,"option",32),b.Lc(20),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Jc(21,G,10,2,"fieldset",26),b.Tb(22,"fieldset"),b.Tb(23,"div",33),b.Tb(24,"button",34),b.Xb(25,P),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Jc(26,Z,2,0,"p",26),b.Jc(27,ee,2,0,"p",26),b.Sb()}if(2&e){const e=b.kc();b.Bb(5),b.rc("ngIf",!e.serverSettings.buildForMarket&&e.isEnterpriseEdition),b.Bb(1),b.rc("ngIf",!e.serverSettings.buildForMarket&&e.isEnterpriseEdition),b.Bb(6),b.rc("name","resolutionHeight")("ngModel",e.serverSettings.logLevel),b.Bb(1),b.sc("value",e.logLevelInfo),b.Bb(1),b.Mc(e.logLevelInfo),b.Bb(1),b.sc("value",e.logLevelWarn),b.Bb(1),b.Mc(e.logLevelWarn),b.Bb(1),b.sc("value",e.logLevelError),b.Bb(1),b.Mc(e.logLevelError),b.Bb(1),b.sc("value",e.logLevelOff),b.Bb(1),b.Mc(e.logLevelOff),b.Bb(1),b.rc("ngIf",e.isEnterpriseEdition&&!e.serverSettings.buildForMarket&&"hourly"===e.currentLicence.type),b.Bb(5),b.rc("ngIf",e.isEnterpriseEdition&&e.serverSettings.buildForMarket),b.Bb(1),b.rc("ngIf",!e.isEnterpriseEdition)}}function ie(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",49),b.gc("click",(function(){return b.Ac(e),b.kc().newUser()})),b.Xb(1,q),b.Sb()}}R=$localize`:licence key settings licence | @@LicenceTabHeader␟39d434c3e1e0988a1585ca45293147f1ffc504c8␟5385767692216459316:General `,D=$localize`:user settings |log@@LogTabHeader␟c788cac76d243927421aae8cc4e9a73d102e39b6␟4832842301452906736:Users`,P=$localize`:@@saveForm␟52c9a103b812f258bcddc3d90a6e3f46871d25fe␟3768927257183755959:Save`,J=$localize`:@@broadcastNameIsRequired␟2935f254a8da07a44a156de5a0a9e7fcde26af92␟1710446914149843457: License key should be at least 4 characters. `,q=$localize`:@@newUserButton␟a97864c21cd0327003f0b0aa23e426f7c8a9857f␟2750332368858308630:New User `,z=$localize`:@@registerUserFullName␟96a5e3b178d6eab5b55ac3c4eafb542d4042324c␟7209368475121981189:First Name${"\ufffd#10\ufffd"}:START_TAG_SPAN:*${"\ufffd/#10\ufffd"}:CLOSE_TAG_SPAN:`,j=$localize`:@@registerUserFullName␟cc5cd1e1a1cff588a65560a1a573f7f283740b06␟5065475369645510341:Last Name${"\ufffd#18\ufffd"}:START_TAG_SPAN:*${"\ufffd/#18\ufffd"}:CLOSE_TAG_SPAN:`,Y=$localize`:@@newPassword␟c1b7e6d75ff4285c7636c67e5ef259629b81725b␟3241357959735682038:Confirm Password`;const se=["placeholder",$localize`:@@password_place_holder␟c32ef07f8803a223a83ed17024b38e8d82292407␟1431416938026210429:Password`];var ne,ce;function ae(e,t){if(1&e&&(b.Tb(0,"option",32),b.Lc(1),b.Sb()),2&e){const e=t.$implicit;b.rc("value",e),b.Bb(1),b.Nc(" ",e," ")}}function re(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",72),b.Tb(1,"div",35),b.Tb(2,"label"),b.Lc(3,"Scope of Access \xa0"),b.Ob(4,"i",73),b.Sb(),b.Tb(5,"select",74),b.gc("ngModelChange",(function(i){return b.Ac(e),t.$implicit.selectedApplication=i}))("change",(function(i){b.Ac(e);const s=t.index;return b.kc(2).onScopeChange(i,s)})),b.Tb(6,"option",32),b.Lc(7,"Everything"),b.Sb(),b.Jc(8,ae,2,2,"option",75),b.Sb(),b.Sb(),b.Tb(9,"div",35),b.Tb(10,"label"),b.Lc(11,"User type \xa0"),b.Ob(12,"i",76),b.Sb(),b.Tb(13,"select",77),b.gc("ngModelChange",(function(i){return b.Ac(e),t.$implicit.userType=i})),b.Tb(14,"option",32),b.Lc(15),b.Sb(),b.Tb(16,"option",32),b.Lc(17),b.Sb(),b.Tb(18,"option",32),b.Lc(19),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=t.$implicit,i=t.index,s=b.kc(2);b.Bb(5),b.rc("name","ApplicationPermission_"+i)("ngModel",e.selectedApplication),b.Bb(1),b.rc("value",s.SYSTEM_SCOPE_OF_ACCESS),b.Bb(2),b.rc("ngForOf",e.selectableApplications),b.Bb(5),b.rc("name","UserType_"+i)("ngModel",e.userType),b.Bb(1),b.sc("value",s.AdminUserType),b.Bb(1),b.Mc(s.AdminUserType),b.Bb(1),b.sc("value",s.BasicUserType),b.Bb(1),b.Mc(s.BasicUserType),b.Bb(1),b.sc("value",s.ReadOnlyUserType),b.Bb(1),b.Mc(s.ReadOnlyUserType)}}function oe(e,t){if(1&e){const e=b.Ub();b.Tb(0,"button",78),b.gc("click",(function(){return b.Ac(e),b.kc(2).addMoreApplicationAccess()})),b.Lc(1,"Add More"),b.Sb()}}function le(e,t){1&e&&(b.bc(0,ce,1),b.Ob(1,"i",38),b.Zb())}function be(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",4),b.Tb(1,"form",50,29),b.gc("ngSubmit",(function(){b.Ac(e);const t=b.yc(2);return b.kc().createUser(t.valid)})),b.Tb(3,"div",51),b.Tb(4,"h4",52),b.Lc(5," New User "),b.Sb(),b.Sb(),b.Tb(6,"div",53),b.Tb(7,"div",22),b.Tb(8,"label"),b.bc(9,z),b.Ob(10,"span",54),b.Zb(),b.Sb(),b.Tb(11,"input",55,56),b.gc("ngModelChange",(function(t){return b.Ac(e),b.kc().User.firstName=t})),b.Sb(),b.Tb(13,"small",45),b.Lc(14," First name is required "),b.Sb(),b.Sb(),b.Tb(15,"div",35),b.Tb(16,"label"),b.bc(17,j),b.Ob(18,"span",54),b.Zb(),b.Sb(),b.Tb(19,"input",57,58),b.gc("ngModelChange",(function(t){return b.Ac(e),b.kc().User.lastName=t})),b.Sb(),b.Tb(21,"small",45),b.Lc(22," Last name is required "),b.Sb(),b.Sb(),b.Tb(23,"div",35),b.Tb(24,"label"),b.Lc(25,"Username (E-mail)"),b.Sb(),b.Tb(26,"input",59,60),b.gc("ngModelChange",(function(t){return b.Ac(e),b.kc().User.email=t})),b.Sb(),b.Tb(28,"small",45),b.Lc(29," E-mail is required in correct form. "),b.Sb(),b.Sb(),b.Tb(30,"div",35),b.Tb(31,"label"),b.Lc(32,"Password"),b.Sb(),b.Tb(33,"input",61,62),b.gc("ngModelChange",(function(t){return b.Ac(e),b.kc().User.password=t})),b.Sb(),b.Tb(35,"small",45),b.Lc(36," Password should be at least 6 characters. "),b.Sb(),b.Sb(),b.Tb(37,"div",35),b.Tb(38,"label"),b.Xb(39,Y),b.Sb(),b.Tb(40,"input",63,64),b.Yb(42,se),b.gc("ngModelChange",(function(t){return b.Ac(e),b.kc().confirmPasswordModel=t})),b.Sb(),b.Tb(43,"small",45),b.Lc(44," Passwords should match "),b.Sb(),b.Sb(),b.Tb(45,"div"),b.Tb(46,"label",65),b.Lc(47,"Application Access"),b.Sb(),b.Tb(48,"div",66),b.Jc(49,re,20,12,"div",67),b.Sb(),b.Jc(50,oe,2,0,"button",68),b.Sb(),b.Tb(51,"div",33),b.Tb(52,"button",69),b.bc(53,ce),b.Jc(54,le,2,0,"i",70),b.Zb(),b.Sb(),b.Tb(55,"button",71),b.gc("click",(function(){return b.Ac(e),b.kc().cancelNewUser()})),b.Xb(56,ne),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&e){const e=b.yc(2),t=b.yc(12),i=b.yc(20),s=b.yc(27),n=b.yc(34),c=b.yc(41),a=b.kc();b.Bb(11),b.rc("ngModel",a.User.firstName),b.Bb(2),b.rc("hidden",t.valid||t.pristine&&!e.submitted),b.Bb(6),b.rc("ngModel",a.User.lastName),b.Bb(2),b.rc("hidden",i.valid||i.pristine&&!e.submitted),b.Bb(5),b.rc("ngModel",a.User.email),b.Bb(2),b.rc("hidden",s.valid||s.pristine&&!e.submitted),b.Bb(5),b.rc("ngModel",a.User.password),b.Bb(2),b.rc("hidden",n.valid||n.pristine&&!e.submitted),b.Bb(5),b.rc("ngModel",a.confirmPasswordModel),b.Bb(3),b.rc("hidden",c.valid||!e.submitted),b.Bb(6),b.rc("ngForOf",a.applicationsForUserScope),b.Bb(1),b.rc("ngIf",a.addMoreApplicationAccessButtonVisible),b.Bb(2),b.rc("disabled",a.newUserCreating),b.Bb(2),b.rc("ngIf",a.newUserCreating)}}function de(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",79),b.Tb(1,"div",80),b.Tb(2,"input",81),b.gc("keyup",(function(t){return b.Ac(e),b.kc().applyFilter(t.target.value)})),b.Sb(),b.Sb(),b.Sb()}}function pe(e,t){1&e&&(b.Tb(0,"mat-header-cell",94),b.Lc(1,"Username"),b.Sb()),2&e&&b.rc("ngClass","email-column")}function ue(e,t){1&e&&(b.Rb(0),b.Lc(1," [No Name] "),b.Qb())}function ge(e,t){if(1&e&&(b.Tb(0,"mat-cell",95),b.Tb(1,"div",96),b.Lc(2),b.Jc(3,ue,2,0,"ng-container",26),b.Sb(),b.Sb()),2&e){const e=t.$implicit;b.rc("ngClass","email-column"),b.Bb(2),b.Nc(" ",e.email," "),b.Bb(1),b.rc("ngIf",!e.email||0==e.email.length)}}function fe(e,t){1&e&&(b.Tb(0,"mat-header-cell",94),b.Lc(1," Scope of Access \xa0"),b.Ob(2,"i",97),b.Sb()),2&e&&b.rc("ngClass","permissions-column")}function he(e,t){if(1&e&&(b.Tb(0,"mat-cell",95),b.Tb(1,"div",96),b.Rb(2),b.Tb(3,"div"),b.Lc(4),b.Sb(),b.Qb(),b.Sb(),b.Sb()),2&e){const e=t.$implicit;b.rc("ngClass","permissions-column"),b.Bb(3),b.Gc("white-space","pre-line"),b.Bb(1),b.Nc(" ",e.scopeOfAccessStr," ")}}function Se(e,t){1&e&&(b.Tb(0,"mat-header-cell",98),b.Lc(1," Actions "),b.Sb())}function me(e,t){if(1&e){const e=b.Ub();b.Tb(0,"mat-cell",98),b.Tb(1,"button",99),b.gc("click",(function(){b.Ac(e);const i=t.$implicit;return b.kc(2).changeType(i)})),b.Tb(2,"span",100),b.Ob(3,"i",101),b.Sb(),b.Pb(4),b.Sb(),b.Tb(5,"button",102),b.gc("click",(function(){b.Ac(e);const i=t.$implicit;return b.kc(2).deleteUser(i.email)})),b.Tb(6,"span",100),b.Ob(7,"i",103),b.Sb(),b.Sb(),b.Sb()}}function Te(e,t){1&e&&b.Ob(0,"mat-header-row")}function ve(e,t){1&e&&b.Ob(0,"mat-row")}function ye(e,t){if(1&e&&(b.Tb(0,"div",82),b.Tb(1,"div",83),b.Tb(2,"mat-table",84),b.Rb(3,85),b.Jc(4,pe,2,1,"mat-header-cell",86),b.Jc(5,ge,4,3,"mat-cell",87),b.Qb(),b.Rb(6,88),b.Jc(7,fe,3,1,"mat-header-cell",86),b.Jc(8,he,5,4,"mat-cell",87),b.Qb(),b.Rb(9,89),b.Jc(10,Se,2,0,"mat-header-cell",90),b.Jc(11,me,8,0,"mat-cell",91),b.Qb(),b.Jc(12,Te,1,0,"mat-header-row",92),b.Jc(13,ve,1,0,"mat-row",93),b.Sb(),b.Sb(),b.Sb()),2&e){const e=b.kc();b.Bb(2),b.rc("dataSource",e.dataSource),b.Bb(10),b.rc("matHeaderRowDef",e.displayedColumnsStreams),b.Bb(1),b.rc("matRowDefColumns",e.displayedColumnsStreams)}}function Ee(e,t){1&e&&(b.Tb(0,"p",37),b.Ob(1,"i",104),b.Lc(2," Inactive"),b.Sb())}function Ce(e,t){if(1&e&&(b.Rb(0),b.Lc(1," | "),b.Tb(2,"a",106),b.Lc(3),b.Sb(),b.Qb()),2&e){const e=b.kc(2);b.Bb(2),b.rc("href",e.getDomainAsHttpsLink(),b.Bc),b.Bb(1),b.Mc(e.getDomainAsHttpsLink())}}function Ae(e,t){if(1&e){const e=b.Ub();b.Rb(0),b.Lc(1," | "),b.Tb(2,"button",107),b.gc("click",(function(){return b.Ac(e),b.kc(2).openSSLForm()})),b.Lc(3,"Change SSL"),b.Sb(),b.Qb()}}function Le(e,t){if(1&e&&(b.Tb(0,"p",37),b.Ob(1,"i",105),b.Lc(2," Active "),b.Jc(3,Ce,4,2,"ng-container",26),b.Jc(4,Ae,4,0,"ng-container",26),b.Sb()),2&e){const e=b.kc();b.Bb(3),b.rc("ngIf",e.serverSettings.sslEnabled&&""!==e.serverSettings.serverName),b.Bb(1),b.rc("ngIf",e.serverSettings.sslEnabled)}}function we(e,t){if(1&e&&(b.Tb(0,"option",32),b.Lc(1),b.Sb()),2&e){const e=b.kc(2);b.sc("value",e.getSslConfigurationTypeName(e.ConfigurationTypes.ANTMEDIA_SUBDOMAIN)),b.Bb(1),b.Mc(e.ConfigurationTypes.ANTMEDIA_SUBDOMAIN)}}function Ue(e,t){if(1&e&&(b.Tb(0,"option",113),b.Lc(1),b.Sb()),2&e){const e=b.kc(2);b.sc("value",e.getSslConfigurationTypeName(e.ConfigurationTypes.ANTMEDIA_SUBDOMAIN)),b.Bb(1),b.Nc("",e.ConfigurationTypes.ANTMEDIA_SUBDOMAIN," - Enterprise License Required")}}function Me(e,t){1&e&&(b.Tb(0,"div",24),b.Tb(1,"p",37),b.Lc(2,"Subdomain of antmedia.cloud will be automatically allocated for you"),b.Sb(),b.Sb())}function Be(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div",24),b.Tb(1,"input",114,115),b.gc("ngModelChange",(function(t){return b.Ac(e),b.kc(2).fqdn=t})),b.Sb(),b.Sb()}if(2&e){const e=b.kc(2);b.Bb(1),b.rc("ngModel",e.fqdn)}}function Ie(e,t){if(1&e){const e=b.Ub();b.Tb(0,"div"),b.Tb(1,"fieldset"),b.Tb(2,"div",22),b.Tb(3,"div"),b.Tb(4,"label",23),b.Lc(5,"Full Chain File(.crt or .pem)"),b.Sb(),b.Tb(6,"div",116),b.Tb(7,"input",117,118),b.gc("change",(function(t){return b.Ac(e),b.kc(2).handleSslCertificateFileInput(t)})),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(9,"fieldset"),b.Tb(10,"div",22),b.Tb(11,"div"),b.Tb(12,"label",23),b.Lc(13,"Key File(.key or .pem)"),b.Sb(),b.Tb(14,"div",116),b.Tb(15,"input",119,118),b.gc("change",(function(t){return b.Ac(e),b.kc(2).handleSslCertificateFileInput(t)})),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(17,"fieldset"),b.Tb(18,"div",22),b.Tb(19,"div"),b.Tb(20,"label",23),b.Lc(21,"Chain File(.crt or .pem)"),b.Sb(),b.Tb(22,"div",116),b.Tb(23,"input",120,118),b.gc("change",(function(t){return b.Ac(e),b.kc(2).handleSslCertificateFileInput(t)})),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}}function Oe(e,t){1&e&&b.Ob(0,"i",121)}function ke(e,t){if(1&e){const e=b.Ub();b.Rb(0),b.Tb(1,"fieldset"),b.Tb(2,"div",22),b.Tb(3,"label",23),b.Lc(4,"Type"),b.Sb(),b.Tb(5,"div",24),b.Tb(6,"select",31,108),b.gc("ngModelChange",(function(t){return b.Ac(e),b.kc().sslConfigurationChanged(t)}))("ngModelChange",(function(t){return b.Ac(e),b.kc().sslConfType=t})),b.Tb(8,"option",32),b.Lc(9),b.Sb(),b.Jc(10,we,2,2,"option",109),b.Jc(11,Ue,2,2,"option",110),b.Tb(12,"option",32),b.Lc(13),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(14,"div",22),b.Tb(15,"fieldset"),b.Tb(16,"label",23),b.Lc(17,"Domain (FQDN)"),b.Sb(),b.Jc(18,Me,3,0,"div",36),b.Jc(19,Be,3,1,"div",36),b.Sb(),b.Sb(),b.Jc(20,Ie,25,0,"div",26),b.Tb(21,"fieldset"),b.Tb(22,"div",33),b.Tb(23,"button",111),b.gc("click",(function(){return b.Ac(e),b.kc().configureSsl()})),b.Jc(24,Oe,1,0,"i",112),b.Lc(25,"Activate "),b.Sb(),b.Sb(),b.Sb(),b.Qb()}if(2&e){const e=b.kc();b.Bb(6),b.rc("name","configurationType")("ngModel",e.sslConfType),b.Bb(2),b.sc("value",e.getSslConfigurationTypeName(e.ConfigurationTypes.CUSTOM_DOMAIN)),b.Bb(1),b.Mc(e.ConfigurationTypes.CUSTOM_DOMAIN),b.Bb(1),b.rc("ngIf","Valid"==e.licenseStatus||e.serverSettings.buildForMarket),b.Bb(1),b.rc("ngIf","Valid"!=e.licenseStatus&&!e.serverSettings.buildForMarket),b.Bb(1),b.sc("value",e.getSslConfigurationTypeName(e.ConfigurationTypes.CUSTOM_CERTIFICATE)),b.Bb(1),b.Mc(e.ConfigurationTypes.CUSTOM_CERTIFICATE),b.Bb(5),b.rc("ngIf",e.sslConfType==e.getSslConfigurationTypeName(e.ConfigurationTypes.ANTMEDIA_SUBDOMAIN)),b.Bb(1),b.rc("ngIf",e.sslConfType==e.getSslConfigurationTypeName(e.ConfigurationTypes.CUSTOM_DOMAIN)||e.sslConfType==e.getSslConfigurationTypeName(e.ConfigurationTypes.CUSTOM_CERTIFICATE)),b.Bb(1),b.rc("ngIf",e.sslConfType==e.getSslConfigurationTypeName(e.ConfigurationTypes.CUSTOM_CERTIFICATE)),b.Bb(3),b.rc("disabled",!e.configureSslEnabled),b.Bb(1),b.rc("ngIf",!e.configureSslEnabled)}}ne=$localize`:@@newUserCancelButton␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,ce=$localize`:@@newUserCreateButton␟38a26d7db25acc2c4f8cd99a4c25ffdf833e450a␟7931405919512135267:${"\ufffd*54:1\ufffd\ufffd#1:1\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#1:1\ufffd\ufffd/*54:1\ufffd"}:CLOSE_ITALIC_TEXT:Create`;let Ne=(()=>{class e{constructor(e,t,i,s,n,c,a,r){this.http=e,this.route=t,this.restService=i,this.dialog=s,this.cdr=n,this.router=c,this.dataService=a,this.authService=r,this.httpsPort=5443,this.crtFileExtension="crt",this.keyFileExtension="key",this.pemFileExtension="pem",this.settingsReceived=!1,this.licenseStatus="Getting license status",this.licenseStatusReceiving=!1,this.configureSslEnabled=!0,this.displayWarning=!0,this.isEnterpriseEdition=!1,this.logLevelInfo="INFO",this.logLevelWarn="WARN",this.logLevelError="ERROR",this.logLevelOff="OFF",this.newUserCreating=!1,this.AdminUserType="ADMIN",this.ReadOnlyUserType="READ_ONLY",this.BasicUserType="USER",this.SYSTEM_SCOPE_OF_ACCESS="system",this.applicationsForUserScope=[],this.selectableApplications=[],this.displayedColumnsStreams=["email","permissions","actions"],this.userListOffset=0,this.pageSize=0,this.userNameEmpty=!1,this.filter="",this.allLicensesUsedError="ALL_LICENSES_ARE_USED",this.noLicenseFounrError="NO_LICENSE_FOUND",this.licenseExpireError="LICENSE_EXPIRED",this.licenseServerRequestError="serverRequestError",this.invalidKeyError="INVALID_KEY",this.licenseBlocked="LICENSE_BLOCKED",this.TRIAL_PERIOD_ENDED="TRIAL_PERIOD_ENDED",this.sslFormActive=!1,this.addMoreApplicationAccessButtonVisible=!0,this.system=!1}get messageReceived(){return this._messageReceived}set messageReceived(e){this._messageReceived=e}ngOnInit(){this.sslConfType=this.getSslConfigurationTypeName(s.e.CUSTOM_DOMAIN),this.serverSettings=new s.d("",null,!1,this.logLevelInfo,!1),this.currentLicence=new s.b(null,null,null,null,null,null,null),this.callTimer(),this.userDataTable={dataRows:[]},this.restService.getApplications().subscribe(e=>{this.applications=e;var t={selectableApplications:[],selectedApplication:"",userType:""};t.selectableApplications.push(...this.applications.applications),this.applicationsForUserScope.push(t)},e=>{Object(a.g)(e)});var e=localStorage.getItem(c.a),t=JSON.parse(e);("system"in t&&"admin"==t.system||t.system==this.AdminUserType)&&(this.system=!0)}ngAfterViewInit(){this.restService.isEnterpriseEdition().subscribe(e=>{this.isEnterpriseEdition=e.success,this.getServerSettings()},e=>{Object(a.g)(e)}),this.getUserList(this.userListOffset,this.pageSize)}ngOnDestroy(){this.clearTimer()}logLevelChanged(e){e==this.logLevelInfo&&(this.serverSettings.logLevel=this.logLevelInfo),e==this.logLevelWarn&&(this.serverSettings.logLevel=this.logLevelWarn),e==this.logLevelError&&(this.serverSettings.logLevel=this.logLevelError),e==this.logLevelOff&&(this.serverSettings.logLevel=this.logLevelOff)}getSslConfigurationTypeName(e){return Object.keys(s.e).find(t=>s.e[t]===e)}sslConfigurationChanged(e){this.sslConfType=e}openSSLForm(){this.sslFormActive=!0}handleSslCertificateFileInput(e){return t=this,void 0,s=function*(){var t=e.target.files[0];switch(e.target.id.toString()){case"fullChainFileInput":this.fullChainFile=t;break;case"keyFileInput":this.privateKeyFile=t;break;case"chainFileInput":this.chainFile=t}},new((i=void 0)||(i=Promise))((function(e,n){function c(e){try{r(s.next(e))}catch(t){n(t)}}function a(e){try{r(s.throw(e))}catch(t){n(t)}}function r(t){var s;t.done?e(t.value):(s=t.value,s instanceof i?s:new i((function(e){e(s)}))).then(c,a)}r((s=s.apply(t,[])).next())}));var t,i,s}applyFilter(e){e=(e=e.trim()).toLowerCase(),this.filter=e,this.dataSource.filter=e}changeType(e){e.email!=localStorage.getItem(c.c)?this.dialog.open(O,{data:{user:e},width:"600px"}).afterClosed().subscribe(e=>{console.log("The dialog was closed"),this.getUserList(this.userListOffset,this.pageSize)}):$.notify({icon:"ti-alert",message:"You cannot edit yourself. If you want to change password, use the Change Password on the right top menu"},{type:"warning",delay:4e3,placement:{from:"top",align:"right"}})}getUserList(e,t){this.restService.getUsers().subscribe(e=>{for(var t in this.userDataTable.dataRows=[],e){var i=this.getScopeOfAccessStr(e[t]);e[t].scopeOfAccessStr=i,this.userDataTable.dataRows.push(e[t])}this.dataSource=new o.k(this.userDataTable.dataRows),""==this.filter&&null==this.filter&&null==this.filter||(this.dataSource.filter=this.filter),this.cdr.detectChanges()},e=>{Object(a.g)(e)})}getScopeOfAccessStr(e){let t="";if(null!=e.userType&&null!=e.scope){let i="";i=e.scope==this.SYSTEM_SCOPE_OF_ACCESS?"Everything":e.scope,t=i+":"+e.userType}else if(e.appNameUserType){let i=Object.entries(e.appNameUserType);i.forEach(([e,s],n)=>{e==this.SYSTEM_SCOPE_OF_ACCESS&&(e="Everything"),t+=e+":"+s,n<i.length-1&&(t+=",\n")})}return t}callTimer(){console.log("Timer Started"),this.clearTimer(),this.timerId=window.setInterval(()=>{this.authService.isAuthenticated&&this.getUserList(this.userListOffset,this.pageSize)},15e3)}clearTimer(){clearInterval(this.timerId),this.timerId=null}getLastLicenseStatus(){this.isEnterpriseEdition&&(this.licenseStatusReceiving=!0,this.restService.getLastLicenseStatus().subscribe(e=>{this.licenseStatusReceiving=!1,this.evaluateLicenseStatus(e)},e=>{Object(a.g)(e)}))}getLicenseStatus(){return this.licenseStatusReceiving=!0,this.isEnterpriseEdition&&(this.serverSettings.licenceKey=this.serverSettings.licenceKey.trim(),this.restService.getLicenseStatus(this.serverSettings.licenceKey).subscribe(e=>{this.licenseStatusReceiving=!1,this.evaluateLicenseStatus(e)},e=>{Object(a.g)(e)})),this.currentLicence}evaluateLicenseStatus(e){var t="Invalid License";if(this.licenseStatusExplaination="Please validate your license",null!=e&&(this.currentLicence=e),null==this.currentLicence||null==this.currentLicence.licenceId)this.licenseStatus="Invalid",console.log("invalid license"),this.currentLicence.status==this.licenseServerRequestError?(t="Could Not Connect To License Server",this.licenseStatus="Network is unaccessible",this.licenseStatusExplaination="Please check your connection"):this.currentLicence.status==this.licenseExpireError?(this.licenseStatus="Expired",this.licenseStatusExplaination="Your license is expired, please renew your license at antmedia.io"):this.currentLicence.status==this.invalidKeyError||this.currentLicence.status==this.noLicenseFounrError?this.licenseStatusExplaination="Your license key is invalid":this.currentLicence.status==this.licenseBlocked?(this.licenseStatus="Suspended",this.licenseStatusExplaination="Your license is suspended. Please renew your license at antmedia.io"):this.currentLicence.status==this.allLicensesUsedError?this.licenseStatusExplaination="You have reached your licence limit. Please close some of your running instances":this.currentLicence.status==this.TRIAL_PERIOD_ENDED&&(this.licenseStatus="Trial expired",this.licenseStatusExplaination="Your trial period is expired. Please buy a license at antmedia.io or extend your trial"),this.authService.licenceWarningDisplay&&!this.serverSettings.buildForMarket&&swal({title:t,text:this.licenseStatusExplaination,type:"error",confirmButtonColor:"#3085d6",confirmButtonText:"OK",onClose:function(){}}).then(()=>{}).catch((function(){}));else{this.licenseStatus="Valid",this.authService.licenceWarningDisplay=!1;let e=this.currentLicence.endDate;this.leftDays=this.differenceInDays((new Date).getTime(),new Date(e).getTime()),this.leftDays<16&&this.authService.licenceWarningDisplay&&(console.log("Your license expires in "+this.leftDays+" days"),swal({title:"Your license expires in "+this.leftDays+" days",text:"Please Renew Your License ",type:"info",confirmButtonColor:"#3085d6",confirmButtonText:"OK",onClose:function(){}}).then(()=>{}).catch((function(){})),this.authService.licenceWarningDisplay=!1)}}changeServerSettings(e){e&&!this.serverSettings.buildForMarket&&this.isEnterpriseEdition&&(console.log(this.serverSettings),this.restService.changeServerSettings(this.serverSettings).subscribe(e=>{1==e.success?($.notify({icon:"ti-save",message:n.a.getLocaleInterface().license_saved},{type:"success",delay:900,placement:{from:"top",align:"right"}}),this.authService.serverSettings=this.serverSettings,this.authService.licenceWarningDisplay=!0,this.serverSettings.buildForMarket||this.getLicenseStatus()):$.notify({icon:"ti-alert",message:n.a.getLocaleInterface().settings_not_saved},{type:"warning",delay:1900,placement:{from:"top",align:"right"}})},e=>{Object(a.g)(e)}))}newUser(){this.newUserActive=!0,this.userNameEmpty=!1,this.User=new a.f("","")}isValidDomain(e){let t=new RegExp(/^(?!-)[A-Za-z0-9-]+([\-\.]{1}[a-z0-9]+)*\.[A-Za-z]{2,}$/);return null!=e&&!!t.test(e)}getDomainAsHttpsLink(){return"https://"+this.serverSettings.serverName+":"+this.httpsPort}certificateFilesReady(){return null!=this.fullChainFile&&null!=this.chainFile&&null!=this.privateKeyFile}configureSsl(){this.sslConfType!=this.getSslConfigurationTypeName(s.e.CUSTOM_DOMAIN)&&this.sslConfType!=this.getSslConfigurationTypeName(s.e.CUSTOM_CERTIFICATE)||this.isValidDomain(this.fqdn)?this.sslConfType!=this.getSslConfigurationTypeName(s.e.CUSTOM_CERTIFICATE)||this.certificateFilesReady()?swal({title:"Confirmation",text:"Server will be restarted automatically after this operaiton",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Proceed"}).then(()=>{$.notify({icon:"ti-info",message:"SSL configuration has started. Please wait a minute..."},{type:"info",delay:5e3,placement:{from:"top",align:"right"}}),this.configureSslEnabled=!1;let e=new FormData;e.append("fullChainFile",this.fullChainFile),e.append("privateKeyFile",this.privateKeyFile),e.append("chainFile",this.chainFile),this.restService.changeSslSettings(this.fqdn,this.sslConfType,e).subscribe(e=>{$.notify({icon:"ti-info",message:"SSL configuration completed. Please refresh the page and login again."},{type:"success",delay:3500,placement:{from:"top",align:"right"}})},e=>{console.log("SSL problem"),console.log(e),this.configureSslEnabled=!0})}).catch((function(){})):alert("Please enter certificate files"):alert("Please enter a valid domain.")}cancelNewUser(){this.newUserActive=!1}deleteUser(e){localStorage.getItem(c.c)!=e?swal({title:n.a.getLocaleInterface().are_you_sure,text:n.a.getLocaleInterface().wont_be_able_to_revert,type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{this.restService.deleteUser(e).subscribe(e=>{1==e.success?$.notify({icon:"ti-save",message:"Successfully deleted"},{type:"success",delay:900,placement:{from:"top",align:"right"}}):$.notify({icon:"ti-alert",message:"User is not deleted"},{type:"warning",delay:900,placement:{from:"top",align:"right"}}),this.getUserList(this.userListOffset,this.pageSize)},e=>{Object(a.g)(e)})}):$.notify({icon:"ti-save",message:"You cannot delete yourself"},{type:"warning",delay:900,placement:{from:"top",align:"right"}})}get ConfigurationTypes(){return s.e}createUser(e){if(console.log("create user called"),this.userNameEmpty=!1,e)if(console.log("create user called 2"),this.restService.checkStreamName(this.User.email)){for(var t={},i=0;i<this.applicationsForUserScope.length;i++){var s=this.applicationsForUserScope[i];if(!s.selectedApplication||!s.userType)return void alert("Choose scope of access and user type.");t[s.selectedApplication]=s.userType}this.User.appNameUserType=t,console.log(this.User),console.log("create user called 3"),this.newUserCreating=!0,this.restService.createUser(this.User).subscribe(e=>{console.log("data :"+JSON.stringify(e)),1==e.success?(this.newUserActive=!1,$.notify({icon:"ti-save",message:n.a.getLocaleInterface().new_user_created},{type:"success",delay:900,placement:{from:"top",align:"right"}}),this.getUserList(this.userListOffset,this.pageSize),this.User.fullName=""):$.notify({icon:"ti-alert",message:"User is not created. "+e.message},{type:"warning",delay:900,placement:{from:"top",align:"right"}})},e=>{Object(a.g)(e)}),this.newUserCreating=!1}else this.userNameEmpty=!0;else console.log("Form is not valid")}getServerSettings(){this.restService.getServerSettings().subscribe(e=>{this.serverSettings=e,console.log(this.serverSettings),this.settingsReceived=!0,this.sslFormActive=!this.serverSettings.sslEnabled,this.serverSettings.buildForMarket||this.getLastLicenseStatus()},e=>{Object(a.g)(e)})}differenceInDays(e,t){return Math.round((t-e)/864e5)}addMoreApplicationAccess(){if(console.log(this.applicationsForUserScope),this.applicationsForUserScope.length<this.applications.applications.length){var e={selectableApplications:[],selectedApplication:"",userType:""};e.selectableApplications.push(...this.applications.applications),this.applicationsForUserScope.push(e)}}onScopeChange(e,t){const i=e.target.value;if(console.log("scope changed!"),i===this.SYSTEM_SCOPE_OF_ACCESS)this.applicationsForUserScope=this.applicationsForUserScope.filter((e,i)=>i===t),this.addMoreApplicationAccessButtonVisible=!1;else{for(let e=0;e<this.applicationsForUserScope.length;e++)e!==t&&this.applicationsForUserScope[e].selectedApplication===i&&(console.log("resetting!"),this.applicationsForUserScope[e].selectedApplication="");this.addMoreApplicationAccessButtonVisible=!0}}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(k.b),b.Nb(N.a),b.Nb(a.e),b.Nb(l.b),b.Nb(b.h),b.Nb(N.c),b.Nb(r.a),b.Nb(c.b))},e.\u0275cmp=b.Hb({type:e,selectors:[["server",8,"settings"]],viewQuery:function(e,t){var i;1&e&&b.Qc(_,!0),2&e&&b.xc(i=b.hc())&&(t.sslConfigurationSelect=i.first)},attrs:F,decls:39,vars:8,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-lg-12","col-sm-12"],[1,"card"],[1,"card-content"],[1,"nav-tabs-navigation"],[1,"nav-tabs-wrapper"],["id","tabs","data-tabs","tabs",1,"nav","nav-tabs"],["href","#licence","data-toggle","tab",1,"active"],["href","#users","data-toggle","tab"],["href","#ssl","data-toggle","tab"],["id","my-tab-content",1,"tab-content","text-center"],["class","tab-pane active","id","licence",4,"ngIf"],["id","users",1,"tab-pane","container-fluid"],[1,"text-right",2,"float","right"],["class","btn btn-fill btn-success","role","button",3,"click",4,"ngIf"],["class","card",4,"ngIf"],["style","display: flex; justify-content: flex-end",4,"ngIf"],["id","broadcastTable","style","text-align: left;",4,"ngIf"],["id","ssl",1,"tab-pane","container-fluid"],[1,"form-horizontal"],[1,"form-group"],[1,"col-sm-2","control-label"],[1,"col-sm-10"],["class","form-control-static text-left",4,"ngIf"],[4,"ngIf"],["id","licence",1,"tab-pane","active"],["method","post",1,"form-horizontal",3,"ngSubmit"],["f","ngForm"],["class","form-group text-left",4,"ngIf"],["type","text","required","",1,"dropdown-toggle","form-control",3,"name","ngModel","ngModelChange"],[3,"value"],[1,"form-group","text-center"],["type","submit",1,"btn","btn-fill","btn-info"],[1,"form-group","text-left"],["class","col-sm-10",4,"ngIf"],[1,"form-control-static","text-left"],["aria-hidden","true",1,"fa","fa-spinner","fa-pulse","fa-1x","fa-fw"],[1,"fa","fa-circle","text-muted",2,"color","#98000d"],[1,"form-control-static"],[1,"ti-check",2,"color","#199826","font-size","1.1em"],[1,"col-sm-10","text-left"],["type","text","required","","minlength","1","name","licenseKey","placeholder","Write your license key",1,"form-control",3,"ngModel","ngModelChange"],["licenseKey","ngModel"],[1,"text-danger",3,"hidden"],["target","_blank","matTooltip","Please click it for more usage detail",3,"href"],[1,"fa","fa-info-circle"],["aria-hidden","true",1,"ti-alarm-clock",2,"color","#199826","font-size","1.1em"],["role","button",1,"btn","btn-fill","btn-success",3,"click"],["method","post","validate","",3,"ngSubmit"],[1,"card-header"],[1,"card-title","text-left"],[1,"card-content","text-left"],[1,"star"],["type","text","name","firstName","required","","minlength","2",1,"form-control","input-no-border",3,"ngModel","ngModelChange"],["firstName","ngModel"],["type","text","name","lastName","required","","minlength","2",1,"form-control","input-no-border",3,"ngModel","ngModelChange"],["lastName","ngModel"],["type","text","required","","minlength","4","name","newUserName","placeholder","Username","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,16}$",1,"form-control",3,"ngModel","ngModelChange"],["newUserName","ngModel"],["type","password","required","","minlength","6","name","Password","autocomplete","new-password","placeholder","Password","validateEqual","confirmPassword","reverse","true",1,"form-control",3,"ngModel","ngModelChange"],["Password","ngModel"],["type","password","required","","minlength","6","name","confirmPassword","autocomplete","new-password","reverse","false","validateEqual","Password",1,"form-control",3,"ngModel","ngModelChange",6,"placeholder"],["confirmPassword","ngModel"],[2,"font-size","22px"],[2,"max-height","250px","overflow-y","scroll"],["style","display: flex; justify-content: space-between; width: 350px;",4,"ngFor","ngForOf"],["type","button","id","addMoreApplicationAccessButton",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-fill","btn-success",2,"margin","15px",3,"disabled"],["class","fa fa-spinner fa-pulse fa-1x fa-fw","aria-hidden","true",4,"ngIf"],["type","button",1,"btn","btn-simple",3,"click"],[2,"display","flex","justify-content","space-between","width","350px"],["matTooltip","'Everything' is access to applications/logs/settings. Application specific access is access to the related app",1,"fa","fa-info-circle"],["type","text",1,"dropdown-toggle","form-control",3,"name","ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["matTooltip","ADMIN user can do anything in their scope. USER can CRUD live streams/upload VoDs in their scope except they cannot change settings/users/applications. READ_ONLY user can only read in their scope",1,"fa","fa-info-circle"],["type","text",1,"dropdown-toggle","form-control",3,"name","ngModel","ngModelChange"],["type","button","id","addMoreApplicationAccessButton",3,"click"],[2,"display","flex","justify-content","flex-end"],[1,"mat-header"],["placeholder","Search",3,"keyup"],["id","broadcastTable",2,"text-align","left"],[1,"mat-container","mat-elevation-z0"],["matSort","",2,"overflow","visible !important",3,"dataSource"],["matColumnDef","email"],["mat-sort-header","",3,"ngClass",4,"matHeaderCellDef"],[3,"ngClass",4,"matCellDef"],["matColumnDef","permissions"],["matColumnDef","actions"],["class","justify-flex-end",4,"matHeaderCellDef"],["class","justify-flex-end",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header","",3,"ngClass"],[3,"ngClass"],[2,"padding-left","12px"],["matTooltip","Everything is access to applications/logs/settings. Application specific access is access to the related app. ADMIN user can do anything in their scope. USER can CRUD live streams/upload VoDs in their scope except they cannot change settings/users/applications. READ_ONLY user can only read in their scope.",1,"fa","fa-info-circle"],[1,"justify-flex-end"],["title","Change Type","data-toggle","tooltip","type","button",1,"btn","btn-simple","btn-magnify","btn-info","btn-xs","big-icons",3,"click"],[1,"btn-label"],[1,"ti-pencil"],["type","button",1,"btn","btn-simple","btn-magnify","btn-danger","btn-xs","big-icons",3,"click"],[1,"ti-close"],[1,"fa","fa-times",2,"color","#98000d"],[1,"fa","fa-check",2,"color","#199826"],[3,"href"],["type","button",1,"btn","btn-simple",2,"padding-left","3px",3,"click"],["sslConfigurationSelect",""],[3,"value",4,"ngIf"],["disabled","true",3,"value",4,"ngIf"],["type","submit",1,"btn","btn-fill","btn-info",3,"disabled","click"],["class","fa fa-spinner fa-pulse  fa-fw",4,"ngIf"],["disabled","true",3,"value"],["type","text","required","","minlength","1","name","sslDomain","placeholder","Type your domain",1,"form-control",3,"ngModel","ngModelChange"],["sslDomain","ngModel"],[1,"col-sm-5"],["type","file","id","fullChainFileInput",3,"change"],["sslFileInput",""],["type","file","id","keyFileInput",3,"change"],["type","file","id","chainFileInput",3,"change"],[1,"fa","fa-spinner","fa-pulse","fa-fw"]],template:function(e,t){1&e&&(b.Tb(0,"div",0),b.Tb(1,"div",1),b.Tb(2,"div",2),b.Tb(3,"div",3),b.Tb(4,"div",4),b.Tb(5,"div",5),b.Tb(6,"div",6),b.Tb(7,"div",7),b.Tb(8,"ul",8),b.Tb(9,"li"),b.Tb(10,"a",9),b.Xb(11,R),b.Sb(),b.Sb(),b.Tb(12,"li"),b.Tb(13,"a",10),b.Xb(14,D),b.Sb(),b.Sb(),b.Tb(15,"li"),b.Tb(16,"a",11),b.Lc(17,"SSL"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(18,"div",12),b.Jc(19,te,28,15,"div",13),b.Tb(20,"div",14),b.Tb(21,"div",15),b.Jc(22,ie,2,0,"button",16),b.Sb(),b.Jc(23,be,57,14,"div",17),b.Jc(24,de,3,0,"div",18),b.Jc(25,ye,14,3,"div",19),b.Tb(26,"p"),b.Lc(27,"\xa0"),b.Sb(),b.Sb(),b.Tb(28,"div",20),b.Tb(29,"div"),b.Tb(30,"form",21),b.Tb(31,"fieldset"),b.Tb(32,"div",22),b.Tb(33,"label",23),b.Lc(34,"SSL Status"),b.Sb(),b.Tb(35,"div",24),b.Jc(36,Ee,3,0,"p",25),b.Jc(37,Le,5,2,"p",25),b.Sb(),b.Sb(),b.Sb(),b.Jc(38,ke,26,13,"ng-container",26),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()),2&e&&(b.Bb(19),b.rc("ngIf",t.settingsReceived),b.Bb(3),b.rc("ngIf",1==t.system),b.Bb(1),b.rc("ngIf",t.newUserActive),b.Bb(1),b.rc("ngIf",t.userDataTable.dataRows.length>0),b.Bb(1),b.rc("ngIf",t.userDataTable.dataRows.length>0),b.Bb(11),b.rc("ngIf",!t.serverSettings.sslEnabled),b.Bb(1),b.rc("ngIf",t.serverSettings.sslEnabled),b.Bb(1),b.rc("ngIf",t.sslFormActive))},directives:[p.p,d.x,d.l,d.m,d.u,d.t,d.k,d.n,d.o,d.w,d.d,d.g,x.a,d.q,u,p.o,o.j,o.c,o.e,o.b,o.g,o.i,o.d,p.n,o.a,o.f,o.h],encapsulation:2}),e.\u0275prov=b.Jb({token:e,factory:e.\u0275fac}),e})()}}]);