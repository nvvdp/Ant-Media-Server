!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(){var e=c([":no cluster node | text messages appears when no node@@noNodeExistsMessage\u241ff62e8e254076975df05ec10d10b9e92169c26b8d\u241f2757926870653264881: There is no cluster node. "]);return a=function(){return e},e}function n(){var e=c([":@@deleteNodeButton\u241f826b25211922a1b46436589233cb6f1a163d89b7\u241f7022070615528435141:Delete"]);return n=function(){return e},e}function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{W7GC:function(e,t){},iNK9:function(c,i,o){"use strict";o.r(i),o.d(i,"ClusterRoutes",(function(){return Se})),o.d(i,"ClusterModule",(function(){return Te}));var r,l,b=o("tyNb"),s=o("ofXK"),u=o("3Pt+"),d=o("tk/3"),f=o("BWpK"),m=o("XGgE"),g=o("Dh3D"),p=o("+0xr"),h=(o("EUDy"),o("W7GC"),o("U/Bw")),v=o("fXoL"),S=o("0IaG"),T=o("M9IT");function w(e,t){1&e&&(v.Tb(0,"mat-header-cell"),v.Lc(1," Node IP "),v.Sb())}function C(e,t){if(1&e&&(v.Tb(0,"mat-cell"),v.Lc(1),v.Sb()),2&e){var a=t.$implicit;v.Bb(1),v.Nc(" ",a.ip," ")}}function y(e,t){1&e&&(v.Tb(0,"mat-header-cell"),v.Lc(1," CPU(%) "),v.Sb())}function N(e,t){if(1&e&&(v.Tb(0,"mat-cell"),v.Lc(1),v.Sb()),2&e){var a=t.$implicit;v.Bb(1),v.Nc(" ",a.cpu," ")}}function D(e,t){1&e&&(v.Tb(0,"mat-header-cell"),v.Lc(1," Memory(MB) - Used/Total "),v.Ob(2,"br"),v.Sb())}function O(e,t){if(1&e&&(v.Tb(0,"mat-cell"),v.Lc(1),v.Sb()),2&e){var a=t.$implicit;v.Bb(1),v.Nc(" ",a.memory," ")}}function I(e,t){1&e&&(v.Tb(0,"mat-header-cell"),v.Lc(1," DB Average Query Time "),v.Ob(2,"br"),v.Sb())}function R(e,t){if(1&e&&(v.Tb(0,"mat-cell"),v.Lc(1),v.Sb()),2&e){var a=t.$implicit;v.Bb(1),v.Nc(" ",a.dbQueryAveargeTimeMs,"ms ")}}function z(e,t){1&e&&(v.Tb(0,"mat-header-cell"),v.Lc(1," Last Heartbeat "),v.Sb())}function k(e,t){if(1&e&&(v.Tb(0,"mat-cell"),v.Lc(1),v.lc(2,"date"),v.Sb()),2&e){var a=t.$implicit;v.Bb(1),v.Nc(" ",v.nc(2,1,a.lastUpdateTime,"yyyy-MM-dd HH:mm:ss")," ")}}function L(e,t){1&e&&(v.Tb(0,"mat-header-cell"),v.Lc(1,"Status "),v.Sb())}function J(e,t){1&e&&(v.Rb(0),v.Ob(1,"span",23),v.Lc(2,"\xa0 Live "),v.Qb())}function B(e,t){1&e&&(v.Ob(0,"span",24),v.Lc(1,"\xa0 Inaccessible "))}function x(e,t){if(1&e&&(v.Tb(0,"mat-cell"),v.Jc(1,J,3,0,"ng-container",21),v.Jc(2,B,2,0,"ng-template",null,22,v.Kc),v.Sb()),2&e){var a=t.$implicit,n=v.yc(3);v.Bb(1),v.rc("ngIf","alive"==a.status)("ngIfElse",n)}}function Q(e,t){1&e&&(v.Tb(0,"mat-header-cell"),v.Lc(1," Actions"),v.Sb())}function M(e,t){if(1&e){var a=v.Ub();v.Tb(0,"mat-cell"),v.Tb(1,"button",25),v.gc("click",(function(){v.Ac(a);var e=t.$implicit;return v.kc(2).deleteNode(e.id)})),v.Tb(2,"span",26),v.Ob(3,"i",27),v.Sb(),v.Rb(4),v.Xb(5,r),v.Qb(),v.Sb(),v.Sb()}}function j(e,t){1&e&&v.Ob(0,"mat-header-row")}function H(e,t){1&e&&v.Ob(0,"mat-row")}function P(e,t){if(1&e){var a=v.Ub();v.Tb(0,"div",6),v.Tb(1,"div",7),v.Tb(2,"mat-table",8),v.Rb(3,9),v.Jc(4,w,2,0,"mat-header-cell",10),v.Jc(5,C,2,1,"mat-cell",11),v.Qb(),v.Rb(6,12),v.Jc(7,y,2,0,"mat-header-cell",10),v.Jc(8,N,2,1,"mat-cell",11),v.Qb(),v.Rb(9,13),v.Jc(10,D,3,0,"mat-header-cell",10),v.Jc(11,O,2,1,"mat-cell",11),v.Qb(),v.Rb(12,14),v.Jc(13,I,3,0,"mat-header-cell",10),v.Jc(14,R,2,1,"mat-cell",11),v.Qb(),v.Rb(15,15),v.Jc(16,z,2,0,"mat-header-cell",10),v.Jc(17,k,3,4,"mat-cell",11),v.Qb(),v.Rb(18,16),v.Jc(19,L,2,0,"mat-header-cell",10),v.Jc(20,x,4,2,"mat-cell",11),v.Qb(),v.Rb(21,17),v.Jc(22,Q,2,0,"mat-header-cell",10),v.Jc(23,M,6,0,"mat-cell",11),v.Qb(),v.Jc(24,j,1,0,"mat-header-row",18),v.Jc(25,H,1,0,"mat-row",19),v.Sb(),v.Tb(26,"mat-paginator",20),v.gc("page",(function(e){return v.Ac(a),v.kc().onPaginateChange(e)})),v.Sb(),v.Sb(),v.Sb()}if(2&e){var n=v.kc();v.Bb(2),v.rc("dataSource",n.dataSourceNode),v.Bb(22),v.rc("matHeaderRowDef",n.nodeColumns),v.Bb(1),v.rc("matRowDefColumns",n.nodeColumns),v.Bb(1),v.rc("length",n.nodeLength)("pageSize",n.pageSize)("pageSizeOptions",n.pageSizeOptions)}}function U(e,t){1&e&&(v.Tb(0,"div",28),v.Tb(1,"div",29),v.Tb(2,"p"),v.Xb(3,l),v.Sb(),v.Sb(),v.Sb())}r=$localize(n()),l=$localize(a());var E,A,G=((E=function(){function a(t,n,c,i,o,r,l,b){e(this,a),this.http=t,this.route=n,this.clusterRestService=c,this.renderer=i,this.router=o,this.dialog=r,this.cdr=l,this.matpage=b,this.nodeColumns=["nodeIp","cpu","memory","dbQueryTime","lastUpdateTime","inTheCluster","actions"],this.pageSize=10,this.pageSizeOptions=[10,25,50],this.pageIndex=0,this.currentOffset=0,this.dataSourceNode=new p.k}var n,c,i;return n=a,(c=[{key:"setPageSizeOptions",value:function(e){this.pageSizeOptions=e.split(",").map((function(e){return+e}))}},{key:"ngOnInit",value:function(){this.nodeTableData={dataRows:[]}}},{key:"onPaginateChange",value:function(e){console.log("cluster page index:"+e.pageIndex+" length: "+e.length+" pageSize:"+e.pageSize),this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.currentOffset=e.pageIndex*this.pageSize,this.getClusterNodes(this.currentOffset,this.pageSize)}},{key:"ngAfterViewInit",value:function(){var e=this;this.getClusterNodeCount(),this.getClusterNodes(0,this.pageSize),this.timerId=window.setInterval((function(){e.getClusterNodeCount(),e.getClusterNodes(e.currentOffset,e.pageSize)}),1e4)}},{key:"ngOnDestroy",value:function(){this.timerId&&clearInterval(this.timerId)}},{key:"getClusterNodeCount",value:function(){var e=this;this.clusterRestService.getClusterNodeCount().subscribe((function(t){e.nodeLength=t.number}),(function(e){Object(h.g)(e)}))}},{key:"getClusterNodes",value:function(e,t){var a=this;this.clusterRestService.getClusterNodes(e,t).subscribe((function(e){for(var t in a.nodeTableData.dataRows=[],e)a.nodeTableData.dataRows.push(e[t]);a.dataSourceNode=new p.k(a.nodeTableData.dataRows)}),(function(e){Object(h.g)(e)}))}},{key:"deleteNode",value:function(e){var t=this;swal({title:m.a.getLocaleInterface().are_you_sure,text:m.a.getLocaleInterface().wont_be_able_to_revert,type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(){var a=t.nodeTableData.dataRows.find((function(t){return t.id==e}));t.clusterRestService.deleteClusterNodes(a).subscribe((function(e){1==e.success||t.showNodeNotDeleted(),t.getClusterNodes(t.currentOffset,t.pageSize)}),(function(e){Object(h.g)(e)}))})).catch((function(){}))}},{key:"showNodeNotDeleted",value:function(){$.notify({icon:"ti-save",message:"Node can not be deleted."},{type:"warning",delay:900,placement:{from:"top",align:"right"}})}}])&&t(n.prototype,c),i&&t(n,i),a}()).\u0275fac=function(e){return new(e||E)(v.Nb(d.b),v.Nb(b.a),v.Nb(f.a),v.Nb(v.G),v.Nb(b.c),v.Nb(S.b),v.Nb(v.h),v.Nb(T.b))},E.\u0275cmp=v.Hb({type:E,selectors:[["app-cluster"]],viewQuery:function(e,t){var a;1&e&&v.Qc(g.a,!0),2&e&&v.xc(a=v.hc())&&(t.sort=a.first)},inputs:{pageEvent:"pageEvent"},outputs:{pageChange:"pageChange"},decls:6,vars:2,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-lg-12","col-sm-12"],["id","nodeTable","style","text-align: left",4,"ngIf"],["class","card",4,"ngIf"],["id","nodeTable",2,"text-align","left"],[1,"mat-container","mat-elevation-z1"],[3,"dataSource"],["matColumnDef","nodeIp"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","cpu"],["matColumnDef","memory"],["matColumnDef","dbQueryTime"],["matColumnDef","lastUpdateTime"],["matColumnDef","inTheCluster"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],[4,"ngIf","ngIfElse"],["showDead",""],[1,"dot","btn-success"],[1,"dot","btn-danger"],["type","button",1,"btn","btn-simple","btn-magnify","btn-danger",3,"click"],[1,"btn-label"],[1,"ti-close"],[1,"card"],[1,"card-content","text-center"]],template:function(e,t){1&e&&(v.Tb(0,"div",0),v.Tb(1,"div",1),v.Tb(2,"div",2),v.Tb(3,"div",3),v.Jc(4,P,27,6,"div",4),v.Jc(5,U,4,0,"div",5),v.Sb(),v.Sb(),v.Sb(),v.Sb()),2&e&&(v.Bb(4),v.rc("ngIf",t.nodeTableData.dataRows.length>0),v.Bb(1),v.rc("ngIf",0==t.nodeTableData.dataRows.length))},directives:[s.p,p.j,p.c,p.e,p.b,p.g,p.i,T.a,p.d,p.a,p.f,p.h],pipes:[s.f],styles:[".dot[_ngcontent-%COMP%]{height:12px;width:12px;border-radius:50%;display:inline-block}"]}),E),K=o("zkoq"),X=o("NFeN"),_=o("qFsG"),W=o("MutI"),q=o("STbY"),F=o("FKr1"),V=o("d3UM"),Y=o("QibW"),Z=o("Xa2L"),ee=o("bv9b"),te=o("Qu3c"),ae=o("/t3+"),ne=o("wZkO"),ce=o("xHqg"),ie=o("dNgK"),oe=o("1jcm"),re=o("5RNC"),le=o("XhcP"),be=o("/1cH"),se=o("bTqV"),ue=o("jaxi"),de=o("Wp6s"),fe=o("bSwM"),me=o("A5z7"),ge=o("iadO"),pe=o("f0Cb"),he=o("7EHt"),ve=o("kmnG"),Se=[{path:"",component:G,pathMatch:"full"}],Te=((A=function t(){e(this,t)}).\u0275mod=v.Lb({type:A}),A.\u0275inj=v.Kb({factory:function(e){return new(e||A)},imports:[[b.f.forChild(Se),s.c,ve.d,_.b,fe.b,S.f,u.f,d.c,S.f,fe.b,_.b,be.a,se.b,ue.a,de.a,me.a,ge.a,pe.a,he.a,K.b,X.b,W.d,q.a,F.m,T.c,ee.a,Z.a,Y.a,F.t,V.b,le.a,re.a,oe.a,ie.a,g.c,ce.a,p.l,ne.a,ae.a,te.b],fe.b,S.f,ve.d,_.b,S.f,fe.b,ve.d,_.b,be.a,se.b,ue.a,de.a,me.a,ge.a,pe.a,he.a,K.b,X.b,W.d,q.a,F.m,T.c,ee.a,Z.a,Y.a,F.t,V.b,le.a,re.a,oe.a,ie.a,g.c,ce.a,p.l,ne.a,ae.a,te.b]}),A)}}])}();