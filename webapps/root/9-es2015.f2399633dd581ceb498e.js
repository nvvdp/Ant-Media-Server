(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{W7GC:function(e,t){},iNK9:function(e,t,a){"use strict";a.r(t),a.d(t,"ClusterRoutes",(function(){return me})),a.d(t,"ClusterModule",(function(){return fe}));var n,c,i=a("tyNb"),o=a("ofXK"),s=a("3Pt+"),l=a("tk/3"),b=a("BWpK"),r=a("XGgE"),d=a("Dh3D"),u=a("+0xr"),m=(a("EUDy"),a("W7GC"),a("U/Bw")),f=a("fXoL"),g=a("0IaG"),h=a("M9IT");function p(e,t){1&e&&(f.Tb(0,"mat-header-cell"),f.Lc(1," Node IP "),f.Sb())}function S(e,t){if(1&e&&(f.Tb(0,"mat-cell"),f.Lc(1),f.Sb()),2&e){const e=t.$implicit;f.Bb(1),f.Nc(" ",e.ip," ")}}function T(e,t){1&e&&(f.Tb(0,"mat-header-cell"),f.Lc(1," CPU(%) "),f.Sb())}function C(e,t){if(1&e&&(f.Tb(0,"mat-cell"),f.Lc(1),f.Sb()),2&e){const e=t.$implicit;f.Bb(1),f.Nc(" ",e.cpu," ")}}function w(e,t){1&e&&(f.Tb(0,"mat-header-cell"),f.Lc(1," Memory(MB) - Used/Total "),f.Ob(2,"br"),f.Sb())}function N(e,t){if(1&e&&(f.Tb(0,"mat-cell"),f.Lc(1),f.Sb()),2&e){const e=t.$implicit;f.Bb(1),f.Nc(" ",e.memory," ")}}function v(e,t){1&e&&(f.Tb(0,"mat-header-cell"),f.Lc(1," DB Average Query Time "),f.Ob(2,"br"),f.Sb())}function y(e,t){if(1&e&&(f.Tb(0,"mat-cell"),f.Lc(1),f.Sb()),2&e){const e=t.$implicit;f.Bb(1),f.Nc(" ",e.dbQueryAveargeTimeMs,"ms ")}}function D(e,t){1&e&&(f.Tb(0,"mat-header-cell"),f.Lc(1," Last Heartbeat "),f.Sb())}function I(e,t){if(1&e&&(f.Tb(0,"mat-cell"),f.Lc(1),f.lc(2,"date"),f.Sb()),2&e){const e=t.$implicit;f.Bb(1),f.Nc(" ",f.nc(2,1,e.lastUpdateTime,"yyyy-MM-dd HH:mm:ss")," ")}}function R(e,t){1&e&&(f.Tb(0,"mat-header-cell"),f.Lc(1,"Status "),f.Sb())}function O(e,t){1&e&&(f.Rb(0),f.Ob(1,"span",23),f.Lc(2,"\xa0 Live "),f.Qb())}function z(e,t){1&e&&(f.Ob(0,"span",24),f.Lc(1,"\xa0 Inaccessible "))}function L(e,t){if(1&e&&(f.Tb(0,"mat-cell"),f.Jc(1,O,3,0,"ng-container",21),f.Jc(2,z,2,0,"ng-template",null,22,f.Kc),f.Sb()),2&e){const e=t.$implicit,a=f.yc(3);f.Bb(1),f.rc("ngIf","alive"==e.status)("ngIfElse",a)}}function J(e,t){1&e&&(f.Tb(0,"mat-header-cell"),f.Lc(1," Actions"),f.Sb())}function B(e,t){if(1&e){const e=f.Ub();f.Tb(0,"mat-cell"),f.Tb(1,"button",25),f.gc("click",(function(){f.Ac(e);const a=t.$implicit;return f.kc(2).deleteNode(a.id)})),f.Tb(2,"span",26),f.Ob(3,"i",27),f.Sb(),f.Rb(4),f.Xb(5,n),f.Qb(),f.Sb(),f.Sb()}}function x(e,t){1&e&&f.Ob(0,"mat-header-row")}function Q(e,t){1&e&&f.Ob(0,"mat-row")}function k(e,t){if(1&e){const e=f.Ub();f.Tb(0,"div",6),f.Tb(1,"div",7),f.Tb(2,"mat-table",8),f.Rb(3,9),f.Jc(4,p,2,0,"mat-header-cell",10),f.Jc(5,S,2,1,"mat-cell",11),f.Qb(),f.Rb(6,12),f.Jc(7,T,2,0,"mat-header-cell",10),f.Jc(8,C,2,1,"mat-cell",11),f.Qb(),f.Rb(9,13),f.Jc(10,w,3,0,"mat-header-cell",10),f.Jc(11,N,2,1,"mat-cell",11),f.Qb(),f.Rb(12,14),f.Jc(13,v,3,0,"mat-header-cell",10),f.Jc(14,y,2,1,"mat-cell",11),f.Qb(),f.Rb(15,15),f.Jc(16,D,2,0,"mat-header-cell",10),f.Jc(17,I,3,4,"mat-cell",11),f.Qb(),f.Rb(18,16),f.Jc(19,R,2,0,"mat-header-cell",10),f.Jc(20,L,4,2,"mat-cell",11),f.Qb(),f.Rb(21,17),f.Jc(22,J,2,0,"mat-header-cell",10),f.Jc(23,B,6,0,"mat-cell",11),f.Qb(),f.Jc(24,x,1,0,"mat-header-row",18),f.Jc(25,Q,1,0,"mat-row",19),f.Sb(),f.Tb(26,"mat-paginator",20),f.gc("page",(function(t){return f.Ac(e),f.kc().onPaginateChange(t)})),f.Sb(),f.Sb(),f.Sb()}if(2&e){const e=f.kc();f.Bb(2),f.rc("dataSource",e.dataSourceNode),f.Bb(22),f.rc("matHeaderRowDef",e.nodeColumns),f.Bb(1),f.rc("matRowDefColumns",e.nodeColumns),f.Bb(1),f.rc("length",e.nodeLength)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions)}}function M(e,t){1&e&&(f.Tb(0,"div",28),f.Tb(1,"div",29),f.Tb(2,"p"),f.Xb(3,c),f.Sb(),f.Sb(),f.Sb())}n=$localize`:@@deleteNodeButton␟826b25211922a1b46436589233cb6f1a163d89b7␟7022070615528435141:Delete`,c=$localize`:no cluster node | text messages appears when no node@@noNodeExistsMessage␟f62e8e254076975df05ec10d10b9e92169c26b8d␟2757926870653264881: There is no cluster node. `;let H=(()=>{class e{constructor(e,t,a,n,c,i,o,s){this.http=e,this.route=t,this.clusterRestService=a,this.renderer=n,this.router=c,this.dialog=i,this.cdr=o,this.matpage=s,this.nodeColumns=["nodeIp","cpu","memory","dbQueryTime","lastUpdateTime","inTheCluster","actions"],this.pageSize=10,this.pageSizeOptions=[10,25,50],this.pageIndex=0,this.currentOffset=0,this.dataSourceNode=new u.k}setPageSizeOptions(e){this.pageSizeOptions=e.split(",").map(e=>+e)}ngOnInit(){this.nodeTableData={dataRows:[]}}onPaginateChange(e){console.log("cluster page index:"+e.pageIndex+" length: "+e.length+" pageSize:"+e.pageSize),this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.currentOffset=e.pageIndex*this.pageSize,this.getClusterNodes(this.currentOffset,this.pageSize)}ngAfterViewInit(){this.getClusterNodeCount(),this.getClusterNodes(0,this.pageSize),this.timerId=window.setInterval(()=>{this.getClusterNodeCount(),this.getClusterNodes(this.currentOffset,this.pageSize)},1e4)}ngOnDestroy(){this.timerId&&clearInterval(this.timerId)}getClusterNodeCount(){this.clusterRestService.getClusterNodeCount().subscribe(e=>{this.nodeLength=e.number},e=>{Object(m.g)(e)})}getClusterNodes(e,t){this.clusterRestService.getClusterNodes(e,t).subscribe(e=>{for(var t in this.nodeTableData.dataRows=[],e)this.nodeTableData.dataRows.push(e[t]);this.dataSourceNode=new u.k(this.nodeTableData.dataRows)},e=>{Object(m.g)(e)})}deleteNode(e){swal({title:r.a.getLocaleInterface().are_you_sure,text:r.a.getLocaleInterface().wont_be_able_to_revert,type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(()=>{let t=this.nodeTableData.dataRows.find(t=>t.id==e);this.clusterRestService.deleteClusterNodes(t).subscribe(e=>{1==e.success||this.showNodeNotDeleted(),this.getClusterNodes(this.currentOffset,this.pageSize)},e=>{Object(m.g)(e)})}).catch((function(){}))}showNodeNotDeleted(){$.notify({icon:"ti-save",message:"Node can not be deleted."},{type:"warning",delay:900,placement:{from:"top",align:"right"}})}}return e.\u0275fac=function(t){return new(t||e)(f.Nb(l.b),f.Nb(i.a),f.Nb(b.a),f.Nb(f.G),f.Nb(i.c),f.Nb(g.b),f.Nb(f.h),f.Nb(h.b))},e.\u0275cmp=f.Hb({type:e,selectors:[["app-cluster"]],viewQuery:function(e,t){var a;1&e&&f.Qc(d.a,!0),2&e&&f.xc(a=f.hc())&&(t.sort=a.first)},inputs:{pageEvent:"pageEvent"},outputs:{pageChange:"pageChange"},decls:6,vars:2,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-lg-12","col-sm-12"],["id","nodeTable","style","text-align: left",4,"ngIf"],["class","card",4,"ngIf"],["id","nodeTable",2,"text-align","left"],[1,"mat-container","mat-elevation-z1"],[3,"dataSource"],["matColumnDef","nodeIp"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","cpu"],["matColumnDef","memory"],["matColumnDef","dbQueryTime"],["matColumnDef","lastUpdateTime"],["matColumnDef","inTheCluster"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],[4,"ngIf","ngIfElse"],["showDead",""],[1,"dot","btn-success"],[1,"dot","btn-danger"],["type","button",1,"btn","btn-simple","btn-magnify","btn-danger",3,"click"],[1,"btn-label"],[1,"ti-close"],[1,"card"],[1,"card-content","text-center"]],template:function(e,t){1&e&&(f.Tb(0,"div",0),f.Tb(1,"div",1),f.Tb(2,"div",2),f.Tb(3,"div",3),f.Jc(4,k,27,6,"div",4),f.Jc(5,M,4,0,"div",5),f.Sb(),f.Sb(),f.Sb(),f.Sb()),2&e&&(f.Bb(4),f.rc("ngIf",t.nodeTableData.dataRows.length>0),f.Bb(1),f.rc("ngIf",0==t.nodeTableData.dataRows.length))},directives:[o.p,u.j,u.c,u.e,u.b,u.g,u.i,h.a,u.d,u.a,u.f,u.h],pipes:[o.f],styles:[".dot[_ngcontent-%COMP%]{height:12px;width:12px;border-radius:50%;display:inline-block}"]}),e})();var U=a("zkoq"),E=a("NFeN"),P=a("qFsG"),j=a("MutI"),A=a("STbY"),G=a("FKr1"),K=a("d3UM"),X=a("QibW"),_=a("Xa2L"),W=a("bv9b"),q=a("Qu3c"),F=a("/t3+"),V=a("wZkO"),Y=a("xHqg"),Z=a("dNgK"),ee=a("1jcm"),te=a("5RNC"),ae=a("XhcP"),ne=a("/1cH"),ce=a("bTqV"),ie=a("jaxi"),oe=a("Wp6s"),se=a("bSwM"),le=a("A5z7"),be=a("iadO"),re=a("f0Cb"),de=a("7EHt"),ue=a("kmnG");const me=[{path:"",component:H,pathMatch:"full"}];let fe=(()=>{class e{}return e.\u0275mod=f.Lb({type:e}),e.\u0275inj=f.Kb({factory:function(t){return new(t||e)},imports:[[i.f.forChild(me),o.c,ue.d,P.b,se.b,g.f,s.f,l.c,g.f,se.b,P.b,ne.a,ce.b,ie.a,oe.a,le.a,be.a,re.a,de.a,U.b,E.b,j.d,A.a,G.m,h.c,W.a,_.a,X.a,G.t,K.b,ae.a,te.a,ee.a,Z.a,d.c,Y.a,u.l,V.a,F.a,q.b],se.b,g.f,ue.d,P.b,g.f,se.b,ue.d,P.b,ne.a,ce.b,ie.a,oe.a,le.a,be.a,re.a,de.a,U.b,E.b,j.d,A.a,G.m,h.c,W.a,_.a,X.a,G.t,K.b,ae.a,te.a,ee.a,Z.a,d.c,Y.a,u.l,V.a,F.a,q.b]}),e})()}}]);